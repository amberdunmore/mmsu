{"version":"1.5.11","config":{"base":"model","include":null,"custom":null},"meta":{"internal":"internal","user":"user","state":"state","result":"dstatedt","output":"output","time":"t","initial_time":"initial_t"},"features":{"continuous":true,"discrete":false,"mixed":false,"has_array":false,"has_output":true,"has_user":true,"has_delay":true,"has_interpolate":false,"has_stochastic":false,"has_data":false,"has_compare":false,"has_include":false,"has_debug":false,"has_derivative":false,"initial_time_dependent":true},"data":{"elements":[{"name":"a","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"A_r","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"A_r0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"A_s","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"A_s0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"b","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"cA","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"cA_r","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"cA_s","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"cD","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"cD_r","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"cD_s","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"cT","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"cT_r_cleared","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"cT_r_failed","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"cT_s","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"D_r","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"D_r0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"D_s","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"D_s0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"delay_index_delayed_lambda_v_r_Sv","location":"internal","storage_type":"int","rank":1,"dimnames":{"length":5,"dim":[],"mult":[]},"stage":"constant"},{"name":"delay_index_delayed_lambda_v_s_Sv","location":"internal","storage_type":"int","rank":1,"dimnames":{"length":4,"dim":[],"mult":[]},"stage":"constant"},{"name":"delay_state_delayed_lambda_v_r_Sv","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":5,"dim":[],"mult":[]},"stage":"null"},{"name":"delay_state_delayed_lambda_v_s_Sv","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":4,"dim":[],"mult":[]},"stage":"null"},{"name":"delayed_lambda_v_r_Sv","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"delayed_lambda_v_s_Sv","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"EIR_global","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"EIR_r","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"EIR_s","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"Ev_r","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"Ev_r0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"Ev_s","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"Ev_s0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"ft","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"init_res","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_A_r","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_A_s","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_D_r","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_D_s","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_Ev_r","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_Ev_s","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_Iv_r","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_Iv_s","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_S","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_Sv","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_t","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"null"},{"name":"initial_T_r_cleared","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_T_r_failed","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"initial_T_s","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"invading_A_r","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"invading_A_r_out","location":"output","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"invading_D_r","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"invading_Ev_r","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"invading_Iv_r","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"invading_T_r_cleared","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"invading_T_r_failed","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"Iv_r","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"Iv_r0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"Iv_s","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"Iv_s0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"lambda_r","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"lambda_s","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"lambda_v_r","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"lambda_v_s","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"m","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"mu","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"n","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"phi","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"population","location":"output","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"population_v","location":"output","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"prevalence","location":"output","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"prevalence_res","location":"output","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"prevalence_resistant_cleared","location":"output","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"prevalence_resistant_failed","location":"output","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"prevalence_resistant_treated","location":"output","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"prevalence_sensitive","location":"output","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"rA","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"rA_r","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"rD","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"rD_r","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"res_time","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"resistance_asymptomatic_ratio","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"resistance_baseline_ratio","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"resistance_cleared_ratio","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"resistance_dur_mult","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"resistance_failed_ratio","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"resistance_trans_mult","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"rT_r_cleared","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"rT_r_cleared_on","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"rT_r_failed","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"rT_r_failed_on","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"rT_s","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"S","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"S0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"Sv","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"Sv0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"T_r_cleared","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"T_r_cleared0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"T_r_failed","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"T_r_failed0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"T_s","location":"variable","storage_type":"double","rank":0,"dimnames":null,"stage":"time"},{"name":"T_s0","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"toff","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"ton","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"treatment_failure_rate","location":"internal","storage_type":"double","rank":0,"dimnames":null,"stage":"user"},{"name":"treatment_failure_rate_on","location":"transient","storage_type":"double","rank":0,"dimnames":null,"stage":"time"}],"variable":{"length":13,"contents":[{"name":"S","offset":0,"initial":"initial_S"},{"name":"D_s","offset":1,"initial":"initial_D_s"},{"name":"A_s","offset":2,"initial":"initial_A_s"},{"name":"T_s","offset":3,"initial":"initial_T_s"},{"name":"D_r","offset":4,"initial":"initial_D_r"},{"name":"A_r","offset":5,"initial":"initial_A_r"},{"name":"T_r_cleared","offset":6,"initial":"initial_T_r_cleared"},{"name":"T_r_failed","offset":7,"initial":"initial_T_r_failed"},{"name":"Sv","offset":8,"initial":"initial_Sv"},{"name":"Ev_s","offset":9,"initial":"initial_Ev_s"},{"name":"Iv_s","offset":10,"initial":"initial_Iv_s"},{"name":"Ev_r","offset":11,"initial":"initial_Ev_r"},{"name":"Iv_r","offset":12,"initial":"initial_Iv_r"}]},"output":{"length":12,"contents":[{"name":"prevalence","offset":0},{"name":"prevalence_res","offset":1},{"name":"population","offset":2},{"name":"population_v","offset":3},{"name":"prevalence_sensitive","offset":4},{"name":"prevalence_resistant_treated","offset":5},{"name":"prevalence_resistant_cleared","offset":6},{"name":"prevalence_resistant_failed","offset":7},{"name":"EIR_s","offset":8},{"name":"EIR_r","offset":9},{"name":"EIR_global","offset":10},{"name":"invading_A_r_out","offset":11}]}},"equations":[{"name":"a","type":"user","source":[124],"depends":null,"lhs":"a","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"A_r0","type":"user","source":[120],"depends":null,"lhs":"A_r0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"A_s0","type":"user","source":[117],"depends":null,"lhs":"A_s0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"b","type":"user","source":[125],"depends":null,"lhs":"b","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"cA","type":"user","source":[144],"depends":null,"lhs":"cA","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"cA_r","type":"expression_scalar","source":[178],"depends":{"functions":["*","if","&&",">","<"],"variables":["cA","t","ton","toff","resistance_asymptomatic_ratio"]},"lhs":"cA_r","rhs":{"value":["*","cA",["if",["&&",[">","t","ton"],["<","t","toff"]],"resistance_asymptomatic_ratio",1]]}},{"name":"cA_s","type":"expression_scalar","source":[172],"depends":{"functions":[],"variables":["cA"]},"lhs":"cA_s","rhs":{"value":"cA"}},{"name":"cD","type":"user","source":[145],"depends":null,"lhs":"cD","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"cD_r","type":"expression_scalar","source":[179],"depends":{"functions":["*","if","&&",">","<"],"variables":["cD","t","ton","toff","resistance_baseline_ratio"]},"lhs":"cD_r","rhs":{"value":["*","cD",["if",["&&",[">","t","ton"],["<","t","toff"]],"resistance_baseline_ratio",1]]}},{"name":"cD_s","type":"expression_scalar","source":[173],"depends":{"functions":[],"variables":["cD"]},"lhs":"cD_s","rhs":{"value":"cD"}},{"name":"cT","type":"user","source":[146],"depends":null,"lhs":"cT","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"cT_r_cleared","type":"expression_scalar","source":[181],"depends":{"functions":["*","if","&&",">","<"],"variables":["cT","t","ton","toff","resistance_cleared_ratio"]},"lhs":"cT_r_cleared","rhs":{"value":["*","cT",["if",["&&",[">","t","ton"],["<","t","toff"]],"resistance_cleared_ratio",1]]}},{"name":"cT_r_failed","type":"expression_scalar","source":[182],"depends":{"functions":["*","if","&&",">","<"],"variables":["cT","t","ton","toff","resistance_failed_ratio"]},"lhs":"cT_r_failed","rhs":{"value":["*","cT",["if",["&&",[">","t","ton"],["<","t","toff"]],"resistance_failed_ratio",1]]}},{"name":"cT_s","type":"expression_scalar","source":[174],"depends":{"functions":[],"variables":["cT"]},"lhs":"cT_s","rhs":{"value":"cT"}},{"name":"D_r0","type":"user","source":[119],"depends":null,"lhs":"D_r0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"D_s0","type":"user","source":[116],"depends":null,"lhs":"D_s0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"delay_index_delayed_lambda_v_r_Sv","type":"delay_index","source":[64],"depends":null,"lhs":"delay_index_delayed_lambda_v_r_Sv","delay":"delayed_lambda_v_r_Sv"},{"name":"delay_index_delayed_lambda_v_s_Sv","type":"delay_index","source":[60],"depends":null,"lhs":"delay_index_delayed_lambda_v_s_Sv","delay":"delayed_lambda_v_s_Sv"},{"name":"delayed_lambda_v_r_Sv","type":"delay_continuous","source":[64],"depends":{"functions":[],"variables":["n","t"]},"lhs":"delayed_lambda_v_r_Sv","rhs":{"value":["*",["*","lambda_v_r","Sv"],["exp",["*",["-","mu"],"n"]]]},"delay":{"state":"delay_state_delayed_lambda_v_r_Sv","index":"delay_index_delayed_lambda_v_r_Sv","substitutions":[],"variables":{"length":5,"contents":[{"name":"D_r","offset":0},{"name":"A_r","offset":1},{"name":"T_r_cleared","offset":2},{"name":"T_r_failed","offset":3},{"name":"Sv","offset":4}]},"equations":["cA_r","cD_r","cT_r_cleared","cT_r_failed","lambda_v_r"],"default":null,"time":"n"}},{"name":"delayed_lambda_v_s_Sv","type":"delay_continuous","source":[60],"depends":{"functions":[],"variables":["n","t"]},"lhs":"delayed_lambda_v_s_Sv","rhs":{"value":["*",["*","lambda_v_s","Sv"],["exp",["*",["-","mu"],"n"]]]},"delay":{"state":"delay_state_delayed_lambda_v_s_Sv","index":"delay_index_delayed_lambda_v_s_Sv","substitutions":[],"variables":{"length":4,"contents":[{"name":"D_s","offset":0},{"name":"A_s","offset":1},{"name":"T_s","offset":2},{"name":"Sv","offset":3}]},"equations":["lambda_v_s"],"default":null,"time":"n"}},{"name":"deriv_A_r","type":"expression_scalar","source":[33,34,35,36,37,38,39,40,41,42],"depends":{"functions":["+","(","-","*"],"variables":["invading_A_r","S","lambda_r","phi","A_s","D_r","rD_r","T_r_failed","rT_r_failed_on","A_r","ft","lambda_s","rA_r"]},"lhs":"A_r","rhs":{"value":["+","invading_A_r",["(",["-",["-",["-",["-",["-",["-",["+",["+",["+",["*",["*","S","lambda_r"],["(",["-",1,"phi"]]],["*",["*","lambda_r","A_s"],["(",["-",1,"phi"]]]],["*","D_r","rD_r"]],["*","T_r_failed","rT_r_failed_on"]],["*",["*",["*","lambda_r","A_r"],"phi"],["(",["-",1,"ft"]]]],["*",["*",["*","lambda_r","A_r"],"phi"],"ft"]],["*",["*",["*","lambda_s","A_r"],"phi"],["(",["-",1,"ft"]]]],["*",["*",["*","lambda_s","A_r"],"phi"],"ft"]],["*",["*","lambda_s","A_r"],["(",["-",1,"phi"]]]],["*","A_r","rA_r"]]]]}},{"name":"deriv_A_s","type":"expression_scalar","source":[13,14,15,16,17,18,19,20,21],"depends":{"functions":["(","-","+","*"],"variables":["S","lambda_s","phi","A_r","D_s","rD","A_s","ft","lambda_r","rA","invading_A_r"]},"lhs":"A_s","rhs":{"value":["(",["-",["-",["-",["-",["-",["-",["-",["+",["+",["*",["*","S","lambda_s"],["(",["-",1,"phi"]]],["*",["*","lambda_s","A_r"],["(",["-",1,"phi"]]]],["*","D_s","rD"]],["*",["*",["*","lambda_s","A_s"],"phi"],["(",["-",1,"ft"]]]],["*",["*",["*","lambda_s","A_s"],"phi"],"ft"]],["*",["*",["*","lambda_r","A_s"],"phi"],["(",["-",1,"ft"]]]],["*",["*",["*","lambda_r","A_s"],"phi"],"ft"]],["*",["*","lambda_r","A_s"],["(",["-",1,"phi"]]]],["*","A_s","rA"]],"invading_A_r"]]}},{"name":"deriv_D_r","type":"expression_scalar","source":[28,29,30,31],"depends":{"functions":["+","(","-","*"],"variables":["invading_D_r","S","lambda_r","phi","ft","A_s","A_r","D_r","rD_r"]},"lhs":"D_r","rhs":{"value":["+","invading_D_r",["(",["-",["+",["+",["*",["*",["*","S","lambda_r"],"phi"],["(",["-",1,"ft"]]],["*",["*",["*","lambda_r","A_s"],"phi"],["(",["-",1,"ft"]]]],["*",["*",["*","lambda_r","A_r"],"phi"],["(",["-",1,"ft"]]]],["*","D_r","rD_r"]]]]}},{"name":"deriv_D_s","type":"expression_scalar","source":[8,9,10,11],"depends":{"functions":["-","(","+","*"],"variables":["S","lambda_s","phi","ft","A_r","A_s","D_s","rD","invading_D_r"]},"lhs":"D_s","rhs":{"value":["-",["(",["-",["+",["+",["*",["*",["*","S","lambda_s"],"phi"],["(",["-",1,"ft"]]],["*",["*",["*","lambda_s","A_r"],"phi"],["(",["-",1,"ft"]]]],["*",["*",["*","lambda_s","A_s"],"phi"],["(",["-",1,"ft"]]]],["*","D_s","rD"]]],"invading_D_r"]}},{"name":"deriv_Ev_r","type":"expression_scalar","source":[65],"depends":{"functions":["+","(","-","*"],"variables":["invading_Ev_r","lambda_v_r","Sv","delayed_lambda_v_r_Sv","mu","Ev_r"]},"lhs":"Ev_r","rhs":{"value":["+","invading_Ev_r",["(",["-",["-",["*","lambda_v_r","Sv"],"delayed_lambda_v_r_Sv"],["*","mu","Ev_r"]]]]}},{"name":"deriv_Ev_s","type":"expression_scalar","source":[61],"depends":{"functions":["-","*"],"variables":["lambda_v_s","Sv","delayed_lambda_v_s_Sv","mu","Ev_s","invading_Ev_r"]},"lhs":"Ev_s","rhs":{"value":["-",["-",["-",["*","lambda_v_s","Sv"],"delayed_lambda_v_s_Sv"],["*","mu","Ev_s"]],"invading_Ev_r"]}},{"name":"deriv_Iv_r","type":"expression_scalar","source":[66],"depends":{"functions":["+","(","-","*"],"variables":["invading_Iv_r","delayed_lambda_v_r_Sv","mu","Iv_r"]},"lhs":"Iv_r","rhs":{"value":["+","invading_Iv_r",["(",["-","delayed_lambda_v_r_Sv",["*","mu","Iv_r"]]]]}},{"name":"deriv_Iv_s","type":"expression_scalar","source":[62],"depends":{"functions":["-","*"],"variables":["delayed_lambda_v_s_Sv","mu","Iv_s","invading_Iv_r"]},"lhs":"Iv_s","rhs":{"value":["-",["-","delayed_lambda_v_s_Sv",["*","mu","Iv_s"]],"invading_Iv_r"]}},{"name":"deriv_S","type":"expression_scalar","source":[4,5,6],"depends":{"functions":["(","+","-","*"],"variables":["S","lambda_s","phi","ft","lambda_r","T_s","rT_s","A_s","rA","A_r","T_r_cleared","rT_r_cleared_on"]},"lhs":"S","rhs":{"value":["(",["+",["+",["+",["+",["-",["*",["*",["-","S"],"lambda_s"],["(",["+",["+",["*","phi","ft"],["*","phi",["(",["-",1,"ft"]]]],["(",["-",1,"phi"]]]]],["*",["*","S","lambda_r"],["(",["+",["+",["*","phi","ft"],["*","phi",["(",["-",1,"ft"]]]],["(",["-",1,"phi"]]]]]],["*","T_s","rT_s"]],["*","A_s","rA"]],["*","A_r","rA"]],["*","T_r_cleared","rT_r_cleared_on"]]]}},{"name":"deriv_Sv","type":"expression_scalar","source":[58],"depends":{"functions":["-","*","(","+"],"variables":["mu","lambda_v_s","lambda_v_r","Sv"]},"lhs":"Sv","rhs":{"value":["-",["-","mu",["*",["(",["+","lambda_v_s","lambda_v_r"]],"Sv"]],["*","mu","Sv"]]}},{"name":"deriv_T_r_cleared","type":"expression_scalar","source":[46,47,48,49],"depends":{"functions":["+","(","-","*"],"variables":["invading_T_r_cleared","S","lambda_r","phi","ft","treatment_failure_rate_on","A_r","A_s","T_r_cleared","rT_r_cleared_on"]},"lhs":"T_r_cleared","rhs":{"value":["+","invading_T_r_cleared",["(",["-",["+",["+",["*",["*",["*",["*","S","lambda_r"],"phi"],"ft"],["(",["-",1,"treatment_failure_rate_on"]]],["*",["*",["*",["*","lambda_r","A_r"],"phi"],"ft"],["(",["-",1,"treatment_failure_rate_on"]]]],["*",["*",["*",["*","lambda_r","A_s"],"phi"],"ft"],["(",["-",1,"treatment_failure_rate_on"]]]],["*","T_r_cleared","rT_r_cleared_on"]]]]}},{"name":"deriv_T_r_failed","type":"expression_scalar","source":[51,52,53,54],"depends":{"functions":["+","(","-","*"],"variables":["invading_T_r_failed","S","lambda_r","phi","ft","treatment_failure_rate_on","A_r","A_s","T_r_failed","rT_r_failed_on"]},"lhs":"T_r_failed","rhs":{"value":["+","invading_T_r_failed",["(",["-",["+",["+",["*",["*",["*",["*","S","lambda_r"],"phi"],"ft"],"treatment_failure_rate_on"],["*",["*",["*",["*","lambda_r","A_r"],"phi"],"ft"],"treatment_failure_rate_on"]],["*",["*",["*",["*","lambda_r","A_s"],"phi"],"ft"],"treatment_failure_rate_on"]],["*","T_r_failed","rT_r_failed_on"]]]]}},{"name":"deriv_T_s","type":"expression_scalar","source":[23,24,25,26],"depends":{"functions":["-","(","+","*"],"variables":["S","lambda_s","phi","ft","A_r","A_s","T_s","rT_s","invading_T_r_cleared","invading_T_r_failed"]},"lhs":"T_s","rhs":{"value":["-",["-",["(",["-",["+",["+",["*",["*",["*","S","lambda_s"],"phi"],"ft"],["*",["*",["*","lambda_s","A_r"],"phi"],"ft"]],["*",["*",["*","lambda_s","A_s"],"phi"],"ft"]],["*","T_s","rT_s"]]],"invading_T_r_cleared"],"invading_T_r_failed"]}},{"name":"EIR_global","type":"expression_scalar","source":[87],"depends":{"functions":["+"],"variables":["EIR_s","EIR_r"]},"lhs":"EIR_global","rhs":{"value":["+","EIR_s","EIR_r"]}},{"name":"EIR_r","type":"expression_scalar","source":[81],"depends":{"functions":["*"],"variables":["m","a","Iv_r"]},"lhs":"EIR_r","rhs":{"value":["*",["*",["*","m","a"],"Iv_r"],365]}},{"name":"EIR_s","type":"expression_scalar","source":[80],"depends":{"functions":["*"],"variables":["m","a","Iv_s"]},"lhs":"EIR_s","rhs":{"value":["*",["*",["*","m","a"],"Iv_s"],365]}},{"name":"Ev_r0","type":"user","source":[140],"depends":null,"lhs":"Ev_r0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"Ev_s0","type":"user","source":[138],"depends":null,"lhs":"Ev_s0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"ft","type":"user","source":[131],"depends":null,"lhs":"ft","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"init_res","type":"user","source":[150],"depends":null,"lhs":"init_res","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"initial_A_r","type":"expression_scalar","source":[105],"depends":{"functions":[],"variables":["A_r0"]},"lhs":"initial_A_r","rhs":{"value":"A_r0"}},{"name":"initial_A_s","type":"expression_scalar","source":[102],"depends":{"functions":[],"variables":["A_s0"]},"lhs":"initial_A_s","rhs":{"value":"A_s0"}},{"name":"initial_D_r","type":"expression_scalar","source":[104],"depends":{"functions":[],"variables":["D_r0"]},"lhs":"initial_D_r","rhs":{"value":"D_r0"}},{"name":"initial_D_s","type":"expression_scalar","source":[101],"depends":{"functions":[],"variables":["D_s0"]},"lhs":"initial_D_s","rhs":{"value":"D_s0"}},{"name":"initial_Ev_r","type":"expression_scalar","source":[111],"depends":{"functions":[],"variables":["Ev_r0"]},"lhs":"initial_Ev_r","rhs":{"value":"Ev_r0"}},{"name":"initial_Ev_s","type":"expression_scalar","source":[109],"depends":{"functions":[],"variables":["Ev_s0"]},"lhs":"initial_Ev_s","rhs":{"value":"Ev_s0"}},{"name":"initial_Iv_r","type":"expression_scalar","source":[112],"depends":{"functions":[],"variables":["Iv_r0"]},"lhs":"initial_Iv_r","rhs":{"value":"Iv_r0"}},{"name":"initial_Iv_s","type":"expression_scalar","source":[110],"depends":{"functions":[],"variables":["Iv_s0"]},"lhs":"initial_Iv_s","rhs":{"value":"Iv_s0"}},{"name":"initial_S","type":"expression_scalar","source":[100],"depends":{"functions":[],"variables":["S0"]},"lhs":"initial_S","rhs":{"value":"S0"}},{"name":"initial_Sv","type":"expression_scalar","source":[108],"depends":{"functions":[],"variables":["Sv0"]},"lhs":"initial_Sv","rhs":{"value":"Sv0"}},{"name":"initial_T_r_cleared","type":"expression_scalar","source":[106],"depends":{"functions":[],"variables":["T_r_cleared0"]},"lhs":"initial_T_r_cleared","rhs":{"value":"T_r_cleared0"}},{"name":"initial_T_r_failed","type":"expression_scalar","source":[107],"depends":{"functions":[],"variables":["T_r_failed0"]},"lhs":"initial_T_r_failed","rhs":{"value":"T_r_failed0"}},{"name":"initial_T_s","type":"expression_scalar","source":[103],"depends":{"functions":[],"variables":["T_s0"]},"lhs":"initial_T_s","rhs":{"value":"T_s0"}},{"name":"invading_A_r","type":"expression_scalar","source":[91],"depends":{"functions":["if","||","<",">","(","+","*","log","/","-"],"variables":["t","res_time","A_s","init_res"]},"lhs":"invading_A_r","rhs":{"value":["if",["||",["<","t","res_time"],[">","t",["(",["+","res_time",1]]]],0,["*","A_s",["log",["/",1,["(",["-",1,"init_res"]]]]]]}},{"name":"invading_D_r","type":"expression_scalar","source":[94],"depends":{"functions":["if","||","<",">","(","+","*","log","/","-"],"variables":["t","res_time","D_s","init_res"]},"lhs":"invading_D_r","rhs":{"value":["if",["||",["<","t","res_time"],[">","t",["(",["+","res_time",1]]]],0,["*","D_s",["log",["/",1,["(",["-",1,"init_res"]]]]]]}},{"name":"invading_Ev_r","type":"expression_scalar","source":[95],"depends":{"functions":["if","||","<",">","(","+","*","log","/","-"],"variables":["t","res_time","Ev_s","init_res"]},"lhs":"invading_Ev_r","rhs":{"value":["if",["||",["<","t","res_time"],[">","t",["(",["+","res_time",1]]]],0,["*","Ev_s",["log",["/",1,["(",["-",1,"init_res"]]]]]]}},{"name":"invading_Iv_r","type":"expression_scalar","source":[96],"depends":{"functions":["if","||","<",">","(","+","*","log","/","-"],"variables":["t","res_time","Iv_s","init_res"]},"lhs":"invading_Iv_r","rhs":{"value":["if",["||",["<","t","res_time"],[">","t",["(",["+","res_time",1]]]],0,["*","Iv_s",["log",["/",1,["(",["-",1,"init_res"]]]]]]}},{"name":"invading_T_r_cleared","type":"expression_scalar","source":[92],"depends":{"functions":["if","||","<",">","(","+","*","log","/","-"],"variables":["t","res_time","T_s","init_res","treatment_failure_rate_on"]},"lhs":"invading_T_r_cleared","rhs":{"value":["if",["||",["<","t","res_time"],[">","t",["(",["+","res_time",1]]]],0,["*",["*","T_s",["log",["/",1,["(",["-",1,"init_res"]]]]],["(",["-",1,"treatment_failure_rate_on"]]]]}},{"name":"invading_T_r_failed","type":"expression_scalar","source":[93],"depends":{"functions":["if","||","<",">","(","+","*","log","/","-"],"variables":["t","res_time","T_s","init_res","treatment_failure_rate_on"]},"lhs":"invading_T_r_failed","rhs":{"value":["if",["||",["<","t","res_time"],[">","t",["(",["+","res_time",1]]]],0,["*",["*","T_s",["log",["/",1,["(",["-",1,"init_res"]]]]],"treatment_failure_rate_on"]]}},{"name":"Iv_r0","type":"user","source":[141],"depends":null,"lhs":"Iv_r0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"Iv_s0","type":"user","source":[139],"depends":null,"lhs":"Iv_s0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"lambda_r","type":"expression_scalar","source":[127],"depends":{"functions":["*"],"variables":["m","a","b","Iv_r","resistance_trans_mult"]},"lhs":"lambda_r","rhs":{"value":["*",["*",["*",["*","m","a"],"b"],"Iv_r"],"resistance_trans_mult"]}},{"name":"lambda_s","type":"expression_scalar","source":[126],"depends":{"functions":["*"],"variables":["m","a","b","Iv_s"]},"lhs":"lambda_s","rhs":{"value":["*",["*",["*","m","a"],"b"],"Iv_s"]}},{"name":"lambda_v_r","type":"expression_scalar","source":[129],"depends":{"functions":["*","(","+"],"variables":["a","cA_r","A_r","cD_r","D_r","cT_r_cleared","T_r_cleared","cT_r_failed","T_r_failed"]},"lhs":"lambda_v_r","rhs":{"value":["*","a",["(",["+",["+",["+",["*","cA_r","A_r"],["*","cD_r","D_r"]],["*","cT_r_cleared","T_r_cleared"]],["*","cT_r_failed","T_r_failed"]]]]}},{"name":"lambda_v_s","type":"expression_scalar","source":[128],"depends":{"functions":["*","(","+"],"variables":["a","cA_s","A_s","cD_s","D_s","cT_s","T_s"]},"lhs":"lambda_v_s","rhs":{"value":["*","a",["(",["+",["+",["*","cA_s","A_s"],["*","cD_s","D_s"]],["*","cT_s","T_s"]]]]}},{"name":"m","type":"user","source":[123],"depends":null,"lhs":"m","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"mu","type":"user","source":[142],"depends":null,"lhs":"mu","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"n","type":"user","source":[143],"depends":null,"lhs":"n","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"output_EIR_global","type":"copy","source":[88],"depends":{"functions":[],"variables":["EIR_global"]},"lhs":"EIR_global"},{"name":"output_EIR_r","type":"copy","source":[83],"depends":{"functions":[],"variables":["EIR_r"]},"lhs":"EIR_r"},{"name":"output_EIR_s","type":"copy","source":[82],"depends":{"functions":[],"variables":["EIR_s"]},"lhs":"EIR_s"},{"name":"output_invading_A_r_out","type":"expression_scalar","source":[97],"depends":{"functions":[],"variables":["invading_A_r"]},"lhs":"invading_A_r_out","rhs":{"value":"invading_A_r"}},{"name":"output_population","type":"expression_scalar","source":[72],"depends":{"functions":["+"],"variables":["S","D_s","A_s","T_s","D_r","A_r","T_r_cleared","T_r_failed"]},"lhs":"population","rhs":{"value":["+",["+",["+",["+",["+",["+",["+","S","D_s"],"A_s"],"T_s"],"D_r"],"A_r"],"T_r_cleared"],"T_r_failed"]}},{"name":"output_population_v","type":"expression_scalar","source":[73],"depends":{"functions":["+"],"variables":["Sv","Ev_s","Iv_s","Ev_r","Iv_r"]},"lhs":"population_v","rhs":{"value":["+",["+",["+",["+","Sv","Ev_s"],"Iv_s"],"Ev_r"],"Iv_r"]}},{"name":"output_prevalence","type":"expression_scalar","source":[70],"depends":{"functions":["+"],"variables":["A_s","D_s","T_s","A_r","D_r","T_r_cleared","T_r_failed"]},"lhs":"prevalence","rhs":{"value":["+",["+",["+",["+",["+",["+","A_s","D_s"],"T_s"],"A_r"],"D_r"],"T_r_cleared"],"T_r_failed"]}},{"name":"output_prevalence_res","type":"expression_scalar","source":[71],"depends":{"functions":["/","(","+"],"variables":["A_r","D_r","T_r_cleared","T_r_failed","A_s","D_s","T_s"]},"lhs":"prevalence_res","rhs":{"value":["/",["(",["+",["+",["+","A_r","D_r"],"T_r_cleared"],"T_r_failed"]],["(",["+",["+",["+",["+",["+",["+","A_s","D_s"],"T_s"],"A_r"],"D_r"],"T_r_cleared"],"T_r_failed"]]]}},{"name":"output_prevalence_resistant_cleared","type":"expression_scalar","source":[76],"depends":{"functions":[],"variables":["T_r_cleared"]},"lhs":"prevalence_resistant_cleared","rhs":{"value":"T_r_cleared"}},{"name":"output_prevalence_resistant_failed","type":"expression_scalar","source":[77],"depends":{"functions":[],"variables":["T_r_failed"]},"lhs":"prevalence_resistant_failed","rhs":{"value":"T_r_failed"}},{"name":"output_prevalence_resistant_treated","type":"expression_scalar","source":[75],"depends":{"functions":["+"],"variables":["T_r_cleared","T_r_failed"]},"lhs":"prevalence_resistant_treated","rhs":{"value":["+","T_r_cleared","T_r_failed"]}},{"name":"output_prevalence_sensitive","type":"expression_scalar","source":[74],"depends":{"functions":["+"],"variables":["A_s","D_s","T_s"]},"lhs":"prevalence_sensitive","rhs":{"value":["+",["+","A_s","D_s"],"T_s"]}},{"name":"phi","type":"user","source":[130],"depends":null,"lhs":"phi","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"rA","type":"user","source":[133],"depends":null,"lhs":"rA","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"rA_r","type":"expression_scalar","source":[187],"depends":{"functions":["/","if","&&",">","<"],"variables":["rA","t","ton","toff","resistance_dur_mult"]},"lhs":"rA_r","rhs":{"value":["/","rA",["if",["&&",[">","t","ton"],["<","t","toff"]],"resistance_dur_mult",1]]}},{"name":"rD","type":"user","source":[132],"depends":null,"lhs":"rD","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"rD_r","type":"expression_scalar","source":[186],"depends":{"functions":["/","if","&&",">","<"],"variables":["rD","t","ton","toff","resistance_dur_mult"]},"lhs":"rD_r","rhs":{"value":["/","rD",["if",["&&",[">","t","ton"],["<","t","toff"]],"resistance_dur_mult",1]]}},{"name":"res_time","type":"user","source":[149],"depends":null,"lhs":"res_time","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"resistance_asymptomatic_ratio","type":"user","source":[160],"depends":null,"lhs":"resistance_asymptomatic_ratio","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"resistance_baseline_ratio","type":"user","source":[157],"depends":null,"lhs":"resistance_baseline_ratio","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"resistance_cleared_ratio","type":"user","source":[158],"depends":null,"lhs":"resistance_cleared_ratio","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"resistance_dur_mult","type":"user","source":[156],"depends":null,"lhs":"resistance_dur_mult","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"resistance_failed_ratio","type":"user","source":[159],"depends":null,"lhs":"resistance_failed_ratio","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"resistance_trans_mult","type":"user","source":[155],"depends":null,"lhs":"resistance_trans_mult","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"rT_r_cleared","type":"user","source":[135],"depends":null,"lhs":"rT_r_cleared","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"rT_r_cleared_on","type":"expression_scalar","source":[167],"depends":{"functions":["if","&&",">","<"],"variables":["t","ton","toff","rT_r_cleared","rT_s"]},"lhs":"rT_r_cleared_on","rhs":{"value":["if",["&&",[">","t","ton"],["<","t","toff"]],"rT_r_cleared","rT_s"]}},{"name":"rT_r_failed","type":"user","source":[136],"depends":null,"lhs":"rT_r_failed","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"rT_r_failed_on","type":"expression_scalar","source":[168],"depends":{"functions":["if","&&",">","<"],"variables":["t","ton","toff","rT_r_failed","rT_s"]},"lhs":"rT_r_failed_on","rhs":{"value":["if",["&&",[">","t","ton"],["<","t","toff"]],"rT_r_failed","rT_s"]}},{"name":"rT_s","type":"user","source":[134],"depends":null,"lhs":"rT_s","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"S0","type":"user","source":[115],"depends":null,"lhs":"S0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"Sv0","type":"user","source":[137],"depends":null,"lhs":"Sv0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"T_r_cleared0","type":"user","source":[121],"depends":null,"lhs":"T_r_cleared0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"T_r_failed0","type":"user","source":[122],"depends":null,"lhs":"T_r_failed0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"T_s0","type":"user","source":[118],"depends":null,"lhs":"T_s0","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"toff","type":"user","source":[148],"depends":null,"lhs":"toff","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"ton","type":"user","source":[147],"depends":null,"lhs":"ton","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"treatment_failure_rate","type":"user","source":[154],"depends":null,"lhs":"treatment_failure_rate","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"treatment_failure_rate_on","type":"expression_scalar","source":[169],"depends":{"functions":["if","&&",">","<"],"variables":["t","ton","toff","treatment_failure_rate"]},"lhs":"treatment_failure_rate_on","rhs":{"value":["if",["&&",[">","t","ton"],["<","t","toff"]],"treatment_failure_rate",0]}}],"debug":[],"components":{"create":{"variables":[],"equations":["delay_index_delayed_lambda_v_r_Sv","delay_index_delayed_lambda_v_s_Sv"]},"user":{"variables":[],"equations":["a","A_r0","A_s0","b","cA","cD","cT","D_r0","D_s0","Ev_r0","Ev_s0","ft","init_res","Iv_r0","Iv_s0","m","mu","n","phi","rA","rD","res_time","resistance_asymptomatic_ratio","resistance_baseline_ratio","resistance_cleared_ratio","resistance_dur_mult","resistance_failed_ratio","resistance_trans_mult","rT_r_cleared","rT_r_failed","rT_s","S0","Sv0","T_r_cleared0","T_r_failed0","T_s0","toff","ton","treatment_failure_rate","cA_s","cD_s","cT_s","initial_A_r","initial_A_s","initial_D_r","initial_D_s","initial_Ev_r","initial_Ev_s","initial_Iv_r","initial_Iv_s","initial_S","initial_Sv","initial_T_r_cleared","initial_T_r_failed","initial_T_s"]},"initial":{"variables":[],"equations":[]},"rhs":{"variables":["S","D_s","A_s","T_s","D_r","A_r","T_r_cleared","T_r_failed","Sv","Ev_s","Iv_s","Ev_r","Iv_r"],"equations":["cA_r","cD_r","cT_r_cleared","cT_r_failed","delayed_lambda_v_r_Sv","delayed_lambda_v_s_Sv","invading_A_r","invading_D_r","invading_Ev_r","invading_Iv_r","lambda_r","lambda_s","rA_r","rD_r","rT_r_cleared_on","rT_r_failed_on","treatment_failure_rate_on","deriv_A_r","deriv_A_s","deriv_D_r","deriv_D_s","deriv_Iv_r","deriv_Iv_s","deriv_S","invading_T_r_cleared","invading_T_r_failed","lambda_v_r","lambda_v_s","deriv_Ev_r","deriv_Ev_s","deriv_Sv","deriv_T_r_cleared","deriv_T_r_failed","deriv_T_s"]},"update_stochastic":{"variables":[],"equations":[]},"output":{"variables":["S","D_s","A_s","T_s","D_r","A_r","T_r_cleared","T_r_failed","Sv","Ev_s","Iv_s","Ev_r","Iv_r"],"equations":["EIR_r","EIR_s","invading_A_r","output_population","output_population_v","output_prevalence","output_prevalence_res","output_prevalence_resistant_cleared","output_prevalence_resistant_failed","output_prevalence_resistant_treated","output_prevalence_sensitive","EIR_global","output_EIR_r","output_EIR_s","output_invading_A_r_out","output_EIR_global"]},"compare":{"variables":[],"equations":[]}},"user":[{"name":"a","has_default":false},{"name":"A_r0","has_default":false},{"name":"A_s0","has_default":false},{"name":"b","has_default":false},{"name":"cA","has_default":false},{"name":"cD","has_default":false},{"name":"cT","has_default":false},{"name":"D_r0","has_default":false},{"name":"D_s0","has_default":false},{"name":"Ev_r0","has_default":false},{"name":"Ev_s0","has_default":false},{"name":"ft","has_default":false},{"name":"init_res","has_default":false},{"name":"Iv_r0","has_default":false},{"name":"Iv_s0","has_default":false},{"name":"m","has_default":false},{"name":"mu","has_default":false},{"name":"n","has_default":false},{"name":"phi","has_default":false},{"name":"rA","has_default":false},{"name":"rD","has_default":false},{"name":"res_time","has_default":false},{"name":"resistance_asymptomatic_ratio","has_default":false},{"name":"resistance_baseline_ratio","has_default":false},{"name":"resistance_cleared_ratio","has_default":false},{"name":"resistance_dur_mult","has_default":false},{"name":"resistance_failed_ratio","has_default":false},{"name":"resistance_trans_mult","has_default":false},{"name":"rT_r_cleared","has_default":false},{"name":"rT_r_failed","has_default":false},{"name":"rT_s","has_default":false},{"name":"S0","has_default":false},{"name":"Sv0","has_default":false},{"name":"T_r_cleared0","has_default":false},{"name":"T_r_failed0","has_default":false},{"name":"T_s0","has_default":false},{"name":"toff","has_default":false},{"name":"ton","has_default":false},{"name":"treatment_failure_rate","has_default":false}],"interpolate":{"min":[],"max":[],"critical":[]},"source":["# Model definitions and differential equations","","# Human Equations","deriv(S) <- (-S * lambda_s * (phi * ft + phi * (1 - ft) + (1 - phi)) -","               S * lambda_r * (phi * ft + phi * (1 - ft) + (1 - phi)) +","               T_s * rT_s + A_s * rA + A_r * rA + T_r_cleared * rT_r_cleared_on)","","deriv(D_s) <- (S * lambda_s * phi * (1 - ft) +","                lambda_s * A_r * phi * (1 - ft) +","                lambda_s * A_s * phi * (1 - ft) -","                D_s * rD) - invading_D_r","","deriv(A_s) <- (S * lambda_s * (1 - phi) +","                lambda_s * A_r * (1 - phi) +","                D_s * rD -","                lambda_s * A_s * phi * (1 - ft) -","                lambda_s * A_s * phi * ft -","                lambda_r * A_s * phi * (1 - ft) -","                lambda_r * A_s * phi * ft -","                lambda_r * A_s * (1 - phi) -","                A_s * rA - invading_A_r)","","deriv(T_s) <- (S * lambda_s * phi * ft +","                lambda_s * A_r * phi * ft +","                lambda_s * A_s * phi * ft -","                T_s * rT_s) - invading_T_r_cleared - invading_T_r_failed","","deriv(D_r) <- invading_D_r + (S * lambda_r * phi * (1 - ft) +","                lambda_r * A_s * phi * (1 - ft) +","                lambda_r * A_r * phi * (1 - ft) -","                D_r * rD_r)","","deriv(A_r) <- invading_A_r + (S * lambda_r * (1 - phi) +","                              lambda_r * A_s * (1 - phi) +","                              D_r * rD_r +","                              T_r_failed * rT_r_failed_on -","                              lambda_r * A_r * phi * (1 - ft) -","                              lambda_r * A_r * phi * ft -","                              lambda_s * A_r * phi * (1 - ft) -","                              lambda_s * A_r * phi * ft -","                              lambda_s * A_r * (1 - phi) -","                              A_r * rA_r)","","# NEW: Split resistant treatment compartments","","deriv(T_r_cleared) <- invading_T_r_cleared + (S * lambda_r * phi * ft * (1 - treatment_failure_rate_on) +","                lambda_r * A_r * phi * ft * (1 - treatment_failure_rate_on) +","                lambda_r * A_s * phi * ft * (1 - treatment_failure_rate_on) -","                T_r_cleared * rT_r_cleared_on)","","deriv(T_r_failed) <- invading_T_r_failed + (S * lambda_r * phi * ft * treatment_failure_rate_on +","                lambda_r * A_r * phi * ft * treatment_failure_rate_on +","                lambda_r * A_s * phi * ft * treatment_failure_rate_on -","                T_r_failed * rT_r_failed_on)","","","# Mosquito Equations","deriv(Sv) <- mu - (lambda_v_s + lambda_v_r) * Sv - mu * Sv","","delayed_lambda_v_s_Sv <- delay(lambda_v_s * Sv * exp(-mu * n), n)","deriv(Ev_s) <- lambda_v_s * Sv - delayed_lambda_v_s_Sv - mu * Ev_s - invading_Ev_r","deriv(Iv_s) <- delayed_lambda_v_s_Sv - mu * Iv_s - invading_Iv_r","","delayed_lambda_v_r_Sv <- delay(lambda_v_r * Sv * exp(-mu * n), n)","deriv(Ev_r) <- invading_Ev_r + (lambda_v_r * Sv - delayed_lambda_v_r_Sv - mu * Ev_r)","deriv(Iv_r) <- invading_Iv_r + (delayed_lambda_v_r_Sv - mu * Iv_r)","","","# Outputs","output(prevalence) <- A_s + D_s + T_s + A_r + D_r + T_r_cleared + T_r_failed","output(prevalence_res) <- (A_r + D_r + T_r_cleared + T_r_failed) / (A_s + D_s + T_s + A_r + D_r + T_r_cleared + T_r_failed)","output(population) <- S + D_s + A_s + T_s + D_r + A_r + T_r_cleared + T_r_failed","output(population_v) <- Sv + Ev_s + Iv_s + Ev_r + Iv_r","output(prevalence_sensitive) <- A_s + D_s + T_s","output(prevalence_resistant_treated) <- T_r_cleared + T_r_failed","output(prevalence_resistant_cleared) <- T_r_cleared","output(prevalence_resistant_failed) <- T_r_failed","","# EIR calculations","EIR_s <- m * a * Iv_s * 365","EIR_r <- m * a * Iv_r * 365","output(EIR_s) <- EIR_s","output(EIR_r) <- EIR_r","","","#EIR_global <- (1 - resistant_ratio) * EIR_s + resistant_ratio * EIR_r","EIR_global <- EIR_s + EIR_r","output(EIR_global) <- EIR_global","","# Resistance introduction","invading_A_r <- if(t < res_time || t > (res_time+1)) 0 else A_s*log(1/(1-init_res))","invading_T_r_cleared <- if(t < res_time || t > (res_time+1)) 0 else T_s*log(1/(1-init_res))*(1-treatment_failure_rate_on)","invading_T_r_failed <- if(t < res_time || t > (res_time+1)) 0 else T_s*log(1/(1-init_res))*treatment_failure_rate_on","invading_D_r <- if(t < res_time || t > (res_time+1)) 0 else D_s*log(1/(1-init_res))","invading_Ev_r <- if(t < res_time || t > (res_time+1)) 0 else Ev_s*log(1/(1-init_res))","invading_Iv_r <- if(t < res_time || t > (res_time+1)) 0 else Iv_s*log(1/(1-init_res))","output(invading_A_r_out) <- invading_A_r","","# Initial conditions","initial(S) <- S0","initial(D_s) <- D_s0","initial(A_s) <- A_s0","initial(T_s) <- T_s0","initial(D_r) <- D_r0","initial(A_r) <- A_r0","initial(T_r_cleared) <- T_r_cleared0","initial(T_r_failed) <- T_r_failed0","initial(Sv) <- Sv0","initial(Ev_s) <- Ev_s0","initial(Iv_s) <- Iv_s0","initial(Ev_r) <- Ev_r0","initial(Iv_r) <- Iv_r0","","# User-defined parameters","S0 <- user()","D_s0 <- user()","A_s0 <- user()","T_s0 <- user()","D_r0 <- user()","A_r0 <- user()","T_r_cleared0 <- user()","T_r_failed0 <- user()","m <- user()","a <- user()","b <- user()","lambda_s <- m * a * b * Iv_s","lambda_r <- m * a * b * Iv_r * resistance_trans_mult","lambda_v_s <- a * (cA_s * A_s + cD_s * D_s + cT_s * T_s) # Updated to incorporate separate infectiousness","lambda_v_r <- a * (cA_r * A_r + cD_r * D_r + cT_r_cleared * T_r_cleared + cT_r_failed * T_r_failed)","phi <- user()","ft <- user()","rD <- user()","rA <- user()","rT_s <- user()","rT_r_cleared <- user()","rT_r_failed <- user()","Sv0 <- user()","Ev_s0 <- user()","Iv_s0 <- user()","Ev_r0 <- user()","Iv_r0 <- user()","mu <- user()","n <- user()","cA <- user()","cD <- user()","cT <- user()","ton <- user()","toff <- user()","res_time <- user()","init_res <- user()","","","# Treatment failure and resistance parameters","treatment_failure_rate <- user()","resistance_trans_mult <- user()","resistance_dur_mult <- user()","resistance_baseline_ratio <- user()","resistance_cleared_ratio <- user()","resistance_failed_ratio <- user()","resistance_asymptomatic_ratio <- user()  # NEW: For Ar compartment specifically","#resistance_clinical_ratio <- user()      # NEW: For Dr compartment specifically","#COMMENT OUT the old parameter: resistance_baseline_ratio <- user()","","","","# Have all resistance related parameters switch on only during ton gap","rT_r_cleared_on <- if (t > ton && t < toff) rT_r_cleared else rT_s","rT_r_failed_on <- if (t > ton && t < toff) rT_r_failed else rT_s","treatment_failure_rate_on <- if (t > ton && t < toff) treatment_failure_rate else 0","","# Defining separate infectiousness parameters for sensitive and resistant strains","cA_s <- cA  # baseline asymptomatic infectiousness (sensitive)","cD_s <- cD  # baseline diseased infectiousness (sensitive)","cT_s <- cT  # baseline treated infectiousness (sensitive)","","# Resistant infectiousness parameters (time-dependent activation)","#cA_r <- cA * if (t > ton && t < toff) resistance_asymptomatic_ratio else 1  # Asymptomatic resistant","cA_r <- cA * if (t > ton && t < toff) resistance_asymptomatic_ratio else 1","cD_r <- cD * if (t > ton && t < toff) resistance_baseline_ratio else 1 # resistance_baseline_ratio only applies to those symptomatic","#cD_r <- cD * if (t > ton && t < toff) resistance_clinical_ratio else 1      # Clinical resistant (untreated)","cT_r_cleared <- cT * if (t > ton && t < toff) resistance_cleared_ratio else 1 # Keep the same as baseline for in vivo","cT_r_failed <- cT * if (t > ton && t < toff) resistance_failed_ratio else 1 # Keep the same as baseline for in vivo","","","# FIXED: Actually use resistance_dur_mult in the resistant recovery rates","rD_r <- rD / if (t > ton && t < toff) resistance_dur_mult else 1   # symptomatic (untreated) infection duration for resistant","rA_r <- rA / if (t > ton && t < toff) resistance_dur_mult else 1   # asymptomatic infection duration for resistant"]}
